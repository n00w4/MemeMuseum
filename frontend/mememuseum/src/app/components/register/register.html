<div class="login-container">
  <div class="login-card">
    <h2>MEMEMUSEUM</h2>
    <h3>Create Account</h3>
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      
      <div>
        <label>Username
          <input type="text" formControlName="username" />
          @if (registerForm.get('username')?.invalid && registerForm.get('username')?.touched) {
            <div class="error">
              @if (registerForm.get('username')?.errors?.['required']) {
                Username required
              } @else if (registerForm.get('username')?.errors?.['minlength']) {
                Username must be at least 3 characters
              }
            </div>
          }
        </label>
      </div>

      <div>
        <label>Email
          <input type="email" formControlName="email" />
          @if (registerForm.get('email')?.invalid && registerForm.get('email')?.touched) {
            <div class="error">
              @if (registerForm.get('email')?.errors?.['required']) {
                Email required
              } @else if (registerForm.get('email')?.errors?.['email']) {
                Invalid email format
              }
            </div>
          }
        </label>
      </div>

      <div>
        <label>Password
          <input type="password" formControlName="password" />
          @if (registerForm.get('password')?.invalid && registerForm.get('password')?.touched) {
            <div class="error">
              @if (registerForm.get('password')?.errors?.['required']) {
                Password required
              } @else if (registerForm.get('password')?.errors?.['minlength']) {
                Password must be at least 8 characters
              }
            </div>
          }
        </label>
      </div>

      <div>
        <label>Confirm Password
          <input type="password" formControlName="confirmPassword" />
          @if (registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched) {
            <div class="error">
              @if (registerForm.get('confirmPassword')?.errors?.['required']) {
                Confirm password required
              } @else if (registerForm.errors?.['passwordMismatch']) {
                Passwords do not match
              }
            </div>
          }
        </label>
      </div>

      <button type="submit" [disabled]="loading || registerForm.invalid">
        {{ loading ? "Creating Account..." : "Register" }}
      </button>

      @if (errorMessage) {
        <div class="error">
          {{ errorMessage }}
        </div>
      }
      
      @if (successMessage) {
        <div class="success">
          {{ successMessage }}
        </div>
      }

      <div class="login-link">
        <p>Already have an account? <a (click)="goToLogin()" class="link">Sign in</a></p>
      </div>
    </form>
  </div>
</div>
